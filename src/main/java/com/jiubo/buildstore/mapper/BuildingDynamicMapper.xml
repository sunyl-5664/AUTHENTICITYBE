<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jiubo.buildstore.dao.BuildingDynamicDao">
    <select id="getDynamicByBid" resultType="com.jiubo.buildstore.bean.BuildingDynamicBean">
        SELECT a.BD_ID,a.BD_NAME,a.BD_CONTENT,a.CREATE_DATE,a.PRO_CER,a.CER_DATE,a.BUILD_ID,b.OPEN_DATE,b.PRO_DATE
         from building_dynamic a,building b
         where a.BUILD_ID = b.BUILD_ID and a.BUILD_ID = #{buildingDynamicBean.buildId}
    </select>

    <select id="getDynamicByPage" resultType="com.jiubo.buildstore.bean.BuildingDynamicBean">
        select * from building_dynamic
        <where>
        <if test="buildingDynamicBean.buildId != null">
            BUILD_ID = #{buildingDynamicBean.buildId}
        </if>
        </where>
    </select>

    <update id="patchDyById">
        update building_dynamic
        <trim prefix="set" suffixOverrides=",">
            <if test="buildingDynamicBean.bdName != null and buildingDynamicBean.bdName != ''">
                #{buildingDynamicBean.bdName},
            </if>
            <if test="buildingDynamicBean.bdContent != null">
                #{buildingDynamicBean.bdContent},
            </if>
            <if test="buildingDynamicBean.createDate != null">
                #{buildingDynamicBean.createDate},
            </if>
            <if test="buildingDynamicBean.buildId != null">
                #{buildingDynamicBean.buildId}
            </if>
        </trim>
        where BD_ID = #{bdId}
    </update>

    <insert id="addDynamic">
        insert into building_dynamic (BD_NAME,BD_CONTENT,CREATE_DATE,BUILD_ID)
        values (#{buildingDynamicBean.bdName},#{buildingDynamicBean.bdContent},
        #{buildingDynamicBean.createDate},#{buildingDynamicBean.buildId})
    </insert>
</mapper>
